<div class="catalog-container">

  <!-- Sidebar Filters -->
  <aside class="sidebar">

    <!-- Search Section -->
    <div class="filter-section">
      <label>Search Catalog</label>
      <div class="search-input-wrapper">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          placeholder="Find your sound..."
        >
        <svg xmlns="http://www.w3.org/2000/svg" class="search-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>
    </div>

    <!-- Categories Section -->
    <div class="filter-section">
      <label>Categories</label>
      <div class="category-list">
        <button
          *ngFor="let cat of ['All', 'Instrument', 'Vinyl', 'Merch']"
          (click)="selectedCategory = cat"
          [class.active]="selectedCategory === cat"
        >
          {{ cat === 'All' ? 'All Products' : cat + 's' }}
          <svg *ngIf="selectedCategory === cat" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">

    <!-- Hero Banner -->
    <div class="hero-banner">
      <div class="hero-bg"></div>
      <img src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&q=80&w=1200" class="hero-img" alt="Hero Background">
      <div class="hero-overlay"></div>

      <div class="hero-text">
        <span class="badge">âœ¨ NEW COLLECTION 2024</span>
        <h1>Discover Your Sound</h1>
        <p>Premium instruments, rare vinyls, and exclusive merchandise for the true audiophile.</p>
      </div>
    </div>

    <!-- Products Grid Section -->
    <div class="products-section">
      <div class="section-header">
        <h2>
          {{ selectedCategory === 'All' ? 'Trending Now' : selectedCategory + 's' }}
        </h2>
        <span class="results-count">{{ filteredProducts.length }} results found</span>
      </div>

      <div class="products-grid">
        <!-- Product Card -->
        <div *ngFor="let product of filteredProducts" class="product-card">

          <!-- Image Container -->
          <div class="card-image">
            <img [src]="product.imageUrl" [alt]="product.name">

            <!-- Badges -->
            <div class="badges">
              <span *ngIf="product.isNew" class="new">New</span>
              <span *ngIf="product.discount" class="sale">-{{ product.discount }}%</span>
            </div>

            <!-- Out of Stock Overlay -->
            <div *ngIf="!product.inStock" class="out-of-stock">
              <span>Out of Stock</span>
            </div>

            <!-- Quick Action Overlay -->
            <div class="quick-actions" *ngIf="product.inStock">
              <button title="Add to Cart">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
              </button>
              <button title="Add to Wishlist">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Content -->
          <div class="card-content">
            <div class="card-meta">
              <span class="category">{{ product.category }}</span>
              <div class="rating" *ngIf="product.rating">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                </svg>
                <span class="count">({{ product.reviewsCount }})</span>
              </div>
            </div>

            <h3>{{ product.name }}</h3>
            <p class="artist" *ngIf="product.artist">{{ product.artist }}</p>

            <div class="card-footer">
              <div class="price">
                <span *ngIf="product.discount" class="original">${{ product.price }}</span>
                <span class="current">${{ getDiscountedPrice(product) | number:'1.0-0' }}</span>
              </div>
              <button class="details-btn">
                Details
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="filteredProducts.length === 0" class="empty-state">
        <div class="icon-box">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
        <h3>No products found</h3>
        <p>We couldn't find any products matching your search criteria. Try adjusting your filters or search term.</p>
        <button (click)="searchTerm = ''; selectedCategory = 'All'">
          Clear Filters
        </button>
      </div>
    </div>
  </main>
</div>
